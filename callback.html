<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>TikTok Login Callback</title>
</head>
<body>
  <h1>ログイン処理中...</h1>
  <script>
    // URLから ?code=xxx を取得
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");
    const state = params.get("state");

    if (code) {
      // サーバーに送ってアクセストークンを取得する
      // ここは本来サーバーサイドで安全に行う
      console.log("Authorization Code:", code);
      console.log("State:", state);

      document.body.innerHTML = `
        <h1>ログイン成功</h1>
        <p>Authorization Code: ${code}</p>
        <p>State: ${state}</p>
        <p>このコードを使ってサーバー側でアクセストークンを取得します。</p>
      `;
    } else {
      document.body.innerHTML = `<h1>ログイン失敗</h1><p>コードが取得できませんでした。</p>`;
    }
  </script>
</body>
</html>
